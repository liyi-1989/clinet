{
    "collab_server" : "",
    "contents" : "# https://www.esrl.noaa.gov/psd/data/gridded/data.ncep.reanalysis.derived.surface.html\n# fileurl=\"ftp://ftp.cdc.noaa.gov/Datasets/ncep.reanalysis.derived/surface/air.mon.mean.nc\"\n# download.file(fileurl,destfile=\"./data/air_mon_mean.nc\")\n\n# library(ncdf4)\n# ncin=nc_open(fileloc)\n# library(RNetCDF)\n# ncin=open.nc(fileloc)\n\nlibrary(rhdf5)\nfileloc=\"./data/air_mon_mean.nc\"\nh5ls(fileloc)\n# group name       otype dclass            dim\n# 0     /  air H5I_DATASET  FLOAT 144 x 73 x 830\n# 1     /  lat H5I_DATASET  FLOAT             73\n# 2     /  lon H5I_DATASET  FLOAT            144\n# 3     / time H5I_DATASET  FLOAT            830\n\nLON=h5read(fileloc,\"lon\")\nLAT=h5read(fileloc,\"lat\")\nX=h5read(fileloc,\"air\") # lon*lat*time unit degC\n\nLAT=rev(LAT)\nLON=c(LON[73:144]-360,LON[1:72])\nX=X[, length(LAT):1, ]\nX=X[c(73:144,1:72),,]\nX=X[,,1:(dim(X)[3]-2)] # 1948-2016\n\nX_mon_mean=X[,,1:12]\nfor(i in 0:11){\n  X0=X[,,(1:dim(X)[3])%%12==i]\n  X_mon_mean[,,i+1]=apply(X0,c(1,2),mean)\n}\n\nfor(i in 1:dim(X)[3]){\n  X[,,i]=X[,,i]-X_mon_mean[,,(i%%12)+1]\n}\n\n\nX1=X[,,1]\n#X1=apply(X,c(1,2),mean)\nimage(LON,LAT,X1)\nlibrary(maptools)\ndata(wrld_simpl)\nplot(wrld_simpl,add=TRUE)\n\n\n#\n\nx1=X[which(LON==-25),which(LAT==37.5),]\nx2=X[which(LON==-17.5),which(LAT==65),]\n\n\nx1=X[which(LON==-120),which(LAT==0),]\nx2=X[which(LON==-70),which(LAT==45),]\nplot(x1,type=\"l\",col=\"blue\")\npoints(x2,type=\"l\",col=\"red\")\n\n\nplot(density(x1),col=\"blue\")\nlines(density(x2),col=\"red\")\n\nplot(x1,x2)\ncor(x1,x2)\n\n# plot(X_mon_mean[100,30,],col=\"blue\",ylim=c(min(X_mon_mean),max(X_mon_mean)))\n# for(i in 100:144){\n#   for(j in 30:36){\n#     lines(X_mon_mean[i,j,],col=rgb((i+j)/250,0,0))\n#   }\n# }\n# \n# \n# \n# plot(density(X[1,1,]),col=\"white\",ylim=c(0,1))\n# for(i in 1:144){\n#   lines(density(X[i,30,]),col=rgb((i)/144,0,0))\n# }\n\n\n#\nD=matrix(1,144*73,144*73)\nfor(i1 in 1:length(LON)){\n  for(j1 in 1:length(LAT)){\n    for(i2 in 1:length(LON)){\n      for(j2 in 1:length(LAT)){\n        i=73*(i1-1)+j1\n        j=73*(i2-1)+j2\n        x=X[i1,j1,]\n        y=X[i2,j2,]\n        if(i>j){\n          D[i,j]=D[j,i]=cor(x,y)\n        }\n        \n      }\n    }\n  }\n}\n  \n\nsave(D,file=\"air_mon_mean_cor.RData\")\n",
    "created" : 1489940077626.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2116512853",
    "id" : "9DD3C09",
    "lastKnownWriteTime" : 1490665215,
    "last_content_update" : 1490665215065,
    "path" : "D:/works/clinet/data/getdata.R",
    "project_path" : "data/getdata.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}